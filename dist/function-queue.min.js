var FunctionQueue=(()=>{var A=Object.create;var m=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,N=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var U=(i,t,s)=>t in i?m(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,w=(i,t)=>{for(var s in t||(t={}))O.call(t,s)&&U(i,s,t[s]);if(F)for(var s of F(t))G.call(t,s)&&U(i,s,t[s]);return i};var P=i=>m(i,"__esModule",{value:!0});var H=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),J=(i,t)=>{P(i);for(var s in t)m(i,s,{get:t[s],enumerable:!0})},V=(i,t,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of k(t))!O.call(i,a)&&a!=="default"&&m(i,a,{get:()=>t[a],enumerable:!(s=$(t,a))||s.enumerable});return i},z=i=>V(P(m(i!=null?A(N(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var T=H((et,R)=>{var v=(()=>{var i=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(c,u,h)=>u in c?i(c,u,{enumerable:!0,configurable:!0,writable:!0,value:h}):c[u]=h,_=(c,u)=>{for(var h in u||(u={}))s.call(u,h)&&n(c,h,u[h]);if(t)for(var h of t(u))a.call(u,h)&&n(c,h,u[h]);return c},p=c=>i(c,"__esModule",{value:!0}),d=(c,u)=>{p(c);for(var h in u)i(c,h,{get:u[h],enumerable:!0})},g={};d(g,{DEFAULT_UUID_LENGTH:()=>y,default:()=>x});var L="4.4.4",y=6,E={dictionary:"alphanum",shuffle:!0,debug:!1,length:y},I=class extends Function{constructor(c={}){super();this.dictIndex=0,this.dictRange=[],this.lowerBound=0,this.upperBound=0,this.dictLength=0,this._digit_first_ascii=48,this._digit_last_ascii=58,this._alpha_lower_first_ascii=97,this._alpha_lower_last_ascii=123,this._hex_last_ascii=103,this._alpha_upper_first_ascii=65,this._alpha_upper_last_ascii=91,this._number_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii]},this._alpha_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alpha_lower_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alpha_upper_dict_ranges={upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_lower_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alphanum_upper_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._hex_dict_ranges={decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]},this.log=(...e)=>{let r=[...e];if(r[0]=`[short-unique-id] ${e[0]}`,this.debug===!0&&typeof console!="undefined"&&console!==null)return console.log(...r)},this.setDictionary=(e,r)=>{let o;if(e&&Array.isArray(e)&&e.length>1)o=e;else{o=[];let l;this.dictIndex=l=0;let f=`_${e}_dict_ranges`,D=this[f];Object.keys(D).forEach(C=>{let j=C;for(this.dictRange=D[j],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=l=this.lowerBound;this.lowerBound<=this.upperBound?l<this.upperBound:l>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?l+=1:l-=1)o.push(String.fromCharCode(this.dictIndex))})}if(r){let l=.5;o=o.sort(()=>Math.random()-l)}this.dict=o,this.dictLength=this.dict.length,this.counter=0},this.seq=()=>this.sequentialUUID(),this.sequentialUUID=()=>{let e,r,o="";e=this.counter;do r=e%this.dictLength,e=Math.trunc(e/this.dictLength),o+=this.dict[r];while(e!==0);return this.counter+=1,o},this.randomUUID=(e=this.uuidLength||y)=>{let r,o,l;if(e===null||typeof e=="undefined"||e<1)throw new Error("Invalid UUID Length Provided");let f=e>=0;for(r="",l=0;l<e;l+=1)o=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,r+=this.dict[o];return r},this.availableUUIDs=(e=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,e).toFixed(0)),this.approxMaxBeforeCollision=(e=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*e).toFixed(20)),this.collisionProbability=(e=this.availableUUIDs(this.uuidLength),r=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(e)/this.availableUUIDs(r)).toFixed(20)),this.uniqueness=(e=this.availableUUIDs(this.uuidLength))=>{let r=parseFloat((1-this.approxMaxBeforeCollision(e)/e).toFixed(20));return r>1?1:r<0?0:r},this.getVersion=()=>this.version,this.stamp=e=>{if(typeof e!="number"||e<10)throw new Error("Param finalLength must be number greater than 10");let r=Math.floor(+new Date/1e3).toString(16),o=e-9,l=Math.round(Math.random()*(o>15?15:o)),f=this.randomUUID(o);return`${f.substr(0,l)}${r}${f.substr(l)}${l.toString(16)}`},this.parseStamp=e=>{if(e.length<10)throw new Error("Stamp length invalid");let r=parseInt(e.substr(e.length-1,1),16);return new Date(parseInt(e.substr(r,8),16)*1e3)};let u=_(_({},E),c);this.counter=0,this.debug=!1,this.dict=[],this.version=L;let{dictionary:h,shuffle:M,length:S}=u;return this.uuidLength=S,this.setDictionary(h,M),this.debug=u.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength}`),new Proxy(this,{apply:(e,r,o)=>this.randomUUID(...o)})}},x=I;return x.default=I,g})();typeof R!="undefined"&&(R.exports=v.default),typeof window!="undefined"&&(v=v.default)});var Z={};J(Z,{default:()=>X});var B=z(T());var q="2.0.0";var Y=new B.default({length:8}),W={waitTimeBetweenRuns:100,getResultTimeout:6e4,maxRetries:1,cleanupResultsOlderThan:6e4},Q=i=>new Promise(t=>setTimeout(t,i)),b=class{constructor(t,s){this._queue=[];this._processing=!1;this.results=[];this._tryFn=async(t,s,a)=>{let n=0,_;for(;(!_||_.error)&&n<=this._options.maxRetries;){n++;try{await Q(this._options.waitTimeBetweenRuns);let p=await this._fn(s),d=Date.now(),g=d-a;_={id:t,duration:g,startTimestamp:a,endTimestamp:d,result:p}}catch(p){let d=Date.now(),g=d-a;_={id:t,duration:g,startTimestamp:a,endTimestamp:d,error:p}}}return _};this._fn=t,this._options=w(w({},W),s||{})}queuePayload(t){let s=Y();return this._queue.push({payload:t,id:s}),s}async _processQueue(){this._processing=!0;let t,s=Date.now();for(;t=this._queue.shift();){let{payload:a,id:n}=t;try{let _=await this._tryFn(n,a,s);this.results.push(w({},_))}catch(_){let p=Date.now();this.results.push({id:n,startTimestamp:s,duration:p-s,endTimestamp:p,error:_})}}this._processing=!1}async processQueue(){this._processing||this._processQueue()}async getResult(t){this.results=this.results.filter(n=>Date.now()-n.endTimestamp<this._options.getResultTimeout);let s=this.results.find(n=>n.id===t),a=Date.now();for(;!s&&Date.now()-a<this._options.getResultTimeout;)await Q(this._options.waitTimeBetweenRuns),s=this.results.find(n=>n.id===t);if(!s){let n=Date.now();return{id:t,startTimestamp:a,duration:n-a,endTimestamp:n,error:new Error(`Result for id ${t} not found (timeout of ${this._options.getResultTimeout}ms exceeded)`)}}return this.results=this.results.filter(n=>n.id!==t),s}};b.version=q;var X=b;return Z;})();
'undefined'!=typeof module&&(module.exports=FunctionQueue.default),'undefined'!=typeof window&&(FunctionQueue=FunctionQueue.default);