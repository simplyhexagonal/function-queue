var FunctionQueue=(()=>{var A=Object.create;var m=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,N=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var P=(s,t,i)=>t in s?m(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i,w=(s,t)=>{for(var i in t||(t={}))O.call(t,i)&&P(s,i,t[i]);if(F)for(var i of F(t))G.call(t,i)&&P(s,i,t[i]);return s};var U=s=>m(s,"__esModule",{value:!0});var H=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),J=(s,t)=>{U(s);for(var i in t)m(s,i,{get:t[i],enumerable:!0})},V=(s,t,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of k(t))!O.call(s,n)&&n!=="default"&&m(s,n,{get:()=>t[n],enumerable:!(i=$(t,n))||i.enumerable});return s},z=s=>V(U(m(s!=null?A(N(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);var T=H((et,v)=>{var R=(()=>{var s=Object.defineProperty,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(c,u,h)=>u in c?s(c,u,{enumerable:!0,configurable:!0,writable:!0,value:h}):c[u]=h,p=(c,u)=>{for(var h in u||(u={}))i.call(u,h)&&o(c,h,u[h]);if(t)for(var h of t(u))n.call(u,h)&&o(c,h,u[h]);return c},_=c=>s(c,"__esModule",{value:!0}),d=(c,u)=>{_(c);for(var h in u)s(c,h,{get:u[h],enumerable:!0})},g={};d(g,{DEFAULT_UUID_LENGTH:()=>y,default:()=>x});var L="4.4.4",y=6,E={dictionary:"alphanum",shuffle:!0,debug:!1,length:y},I=class extends Function{constructor(c={}){super();this.dictIndex=0,this.dictRange=[],this.lowerBound=0,this.upperBound=0,this.dictLength=0,this._digit_first_ascii=48,this._digit_last_ascii=58,this._alpha_lower_first_ascii=97,this._alpha_lower_last_ascii=123,this._hex_last_ascii=103,this._alpha_upper_first_ascii=65,this._alpha_upper_last_ascii=91,this._number_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii]},this._alpha_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alpha_lower_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alpha_upper_dict_ranges={upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_lower_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alphanum_upper_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._hex_dict_ranges={decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]},this.log=(...e)=>{let r=[...e];if(r[0]=`[short-unique-id] ${e[0]}`,this.debug===!0&&typeof console!="undefined"&&console!==null)return console.log(...r)},this.setDictionary=(e,r)=>{let a;if(e&&Array.isArray(e)&&e.length>1)a=e;else{a=[];let l;this.dictIndex=l=0;let f=`_${e}_dict_ranges`,D=this[f];Object.keys(D).forEach(C=>{let j=C;for(this.dictRange=D[j],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=l=this.lowerBound;this.lowerBound<=this.upperBound?l<this.upperBound:l>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?l+=1:l-=1)a.push(String.fromCharCode(this.dictIndex))})}if(r){let l=.5;a=a.sort(()=>Math.random()-l)}this.dict=a,this.dictLength=this.dict.length,this.counter=0},this.seq=()=>this.sequentialUUID(),this.sequentialUUID=()=>{let e,r,a="";e=this.counter;do r=e%this.dictLength,e=Math.trunc(e/this.dictLength),a+=this.dict[r];while(e!==0);return this.counter+=1,a},this.randomUUID=(e=this.uuidLength||y)=>{let r,a,l;if(e===null||typeof e=="undefined"||e<1)throw new Error("Invalid UUID Length Provided");let f=e>=0;for(r="",l=0;l<e;l+=1)a=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,r+=this.dict[a];return r},this.availableUUIDs=(e=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,e).toFixed(0)),this.approxMaxBeforeCollision=(e=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*e).toFixed(20)),this.collisionProbability=(e=this.availableUUIDs(this.uuidLength),r=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(e)/this.availableUUIDs(r)).toFixed(20)),this.uniqueness=(e=this.availableUUIDs(this.uuidLength))=>{let r=parseFloat((1-this.approxMaxBeforeCollision(e)/e).toFixed(20));return r>1?1:r<0?0:r},this.getVersion=()=>this.version,this.stamp=e=>{if(typeof e!="number"||e<10)throw new Error("Param finalLength must be number greater than 10");let r=Math.floor(+new Date/1e3).toString(16),a=e-9,l=Math.round(Math.random()*(a>15?15:a)),f=this.randomUUID(a);return`${f.substr(0,l)}${r}${f.substr(l)}${l.toString(16)}`},this.parseStamp=e=>{if(e.length<10)throw new Error("Stamp length invalid");let r=parseInt(e.substr(e.length-1,1),16);return new Date(parseInt(e.substr(r,8),16)*1e3)};let u=p(p({},E),c);this.counter=0,this.debug=!1,this.dict=[],this.version=L;let{dictionary:h,shuffle:M,length:S}=u;return this.uuidLength=S,this.setDictionary(h,M),this.debug=u.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength}`),new Proxy(this,{apply:(e,r,a)=>this.randomUUID(...a)})}},x=I;return x.default=I,g})();typeof v!="undefined"&&(v.exports=R.default),typeof window!="undefined"&&(R=R.default)});var Z={};J(Z,{default:()=>X});var q=z(T());var Q="2.0.0";var Y=new q.default({length:8}),W={waitTimeBetweenRuns:100,getResultTimeout:6e4,maxRetries:1,cleanupResultsOlderThan:6e4},B=s=>new Promise(t=>setTimeout(t,s)),b=class{constructor(t,i){this._queue=[];this._processing=!1;this.results=[];this.processQueuePromise=Promise.resolve([]);this._tryFn=async(t,i,n)=>{let o=0,p;for(;(!p||p.error)&&o<=this._options.maxRetries;){o++;try{await B(this._options.waitTimeBetweenRuns);let _=await this._fn(i),d=Date.now(),g=d-n;p={id:t,duration:g,startTimestamp:n,endTimestamp:d,result:_}}catch(_){let d=Date.now(),g=d-n;p={id:t,duration:g,startTimestamp:n,endTimestamp:d,error:_}}}return p};this._fn=t,this._options=w(w({},W),i||{})}queuePayload(t){let i=Y();return this._queue.push({payload:t,id:i}),i}async _processQueue(){this._processing=!0;let t,i=Date.now();for(;t=this._queue.shift();){let{payload:n,id:o}=t;try{let p=await this._tryFn(o,n,i);this.results.push(w({},p))}catch(p){let _=Date.now();this.results.push({id:o,startTimestamp:i,duration:_-i,endTimestamp:_,error:p})}}this._processing=!1}cleanupResults(){this.results=this.results.filter(t=>Date.now()-t.endTimestamp<this._options.cleanupResultsOlderThan)}async processQueue(){this._processing||(this.cleanupResults(),this.processQueuePromise=this._processQueue().then(()=>this.results))}async getResult(t){this.cleanupResults();let i=this.results.find(o=>o.id===t),n=Date.now();for(;!i&&Date.now()-n<this._options.getResultTimeout;)await B(this._options.waitTimeBetweenRuns),i=this.results.find(o=>o.id===t);if(!i){let o=Date.now();return{id:t,startTimestamp:n,duration:o-n,endTimestamp:o,error:new Error(`Result for id ${t} not found (timeout of ${this._options.getResultTimeout}ms exceeded)`)}}return this.results=this.results.filter(o=>o.id!==t),i}};b.version=Q;var X=b;return Z;})();
'undefined'!=typeof module&&(module.exports=FunctionQueue.default),'undefined'!=typeof window&&(FunctionQueue=FunctionQueue.default);